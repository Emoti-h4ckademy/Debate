describe("Image model testing:", function() {
    var Image = require('../../models/image');
    var express = require('express');
    var dbHandler = require('../../lib/dbHandler');
    var app = express();

    var imObject = new Image ({
        persona:    "Albert Rivera",
        date:        new Date(),
        image: 	     "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",
        emotions :   JSON.stringify([{"anger":0.000228346282,"contempt":0.0027772414,"disgust":0.00129539322,"fear":0.000281588436,"happiness":0.0002270014,"neutral":0.710152447,"sadness":0.2846569,"surprise":0.000381041435}]),
        mainEmotion: 'stoned'
    });

    dbHandler.initializeDatabase(app, function (error) {
       if (error) {
           console.log ("Could not initialize database. Check if MongoDB service is up");
           process.exit(1);
       }
    });

    afterAll(function() {
      dbHandler.closeConnection();
    });

    it("It saves correctly a document in database", function(done) {
        imObject.save(function (error) {
          expect(error).toBeFalsy();
          done();
      });
    });
});
